## 📍 개요
핵심 기능만 담은 인스타그램 백엔드 클론 코딩입니다. 
## 🚀 학습 목표
- 프론트엔드와 백엔드 통신 원리를 이해할 수 있다.
- 정규표현식을 활용해 validation을 할 수 있다.
- 회원가입시 bcrypt 라이브러리를 통해 패스워드를 암호화해 DB에 저장할 수 있다.
- 로그인 시 jwt 라이브러리 이용해 토큰 발행할 수 있다.
- 데코레이터를 사용해 토큰을 처리할 수 있다.
- 인증과 인가의 개념을 설명할 수 있다.

## 🛠️ 기술스택
- Language : python 3
- Framework : Django
- Database : MySQL
- Infra : Docker, docker-compose, AWS

## 💡 westargram ERD
![westargram](https://user-images.githubusercontent.com/50139787/147879989-0b9cf58e-050a-4548-9332-a2b566df37c5.jpg)


## 📝 프로젝트 내용 
### 1. 회원가입 시퀀스 
![signupsequence](https://user-images.githubusercontent.com/50139787/147874375-9c09f51c-548e-4a6f-80dd-6edda6a8c1b8.jpg)
### 2. Bcrypt 암호화
- 암호화는 실수 또는 해커 공격으로 비인가자에 노출 되더라도 내용을 확인하기 어렵게 하는 보안기술이다. 
- 클라이언트에서 건너오는 단계에서는 https(SSL)로 암호화 통신되어 온다.
- 같은 인풋 값은 항상 같은 해시값이 나온다. 이런 허점을 이용해 레인보우 테이블로 해시값을 만들어 팔기도 한다. 따라서 한 번 해시하는 것은 큰 의미가 없다.
- 해쉬는 원래 목적은 빠른 자료 검색, 데이터 위변조 체크를 위함이였기 때문에 복원 불가능한 암호학적 용도로 사용되기 위해서 여러 기술들이 더해졌다. 
- bcrypt는 솔트와 키스트레칭을 통해 더 안전하게 비밀번호를 암호화하는 기술이다.


### 3. 로그인 sequence diagram 
![loginsequence](https://user-images.githubusercontent.com/50139787/147873950-62c4ea0a-0c54-4ad6-97ce-6039ce6e4ffa.jpg)

### 4. JWT 
- Json Web Token 구성요소 3가지 : 헤더(header), 내용(payload), 서명(signature)
- 헤더와 페이로드 부분은 인코딩 된거지 암호화된 게 아니다. 누구나 디코드 해서 내용을 확인할 수 있기 때문에 절대 중요 정보를 담지 않는다.
- 페이로드에는 3가지 클레임 정보가 조합되는데, 공개적 정보인 public claim, userid 같이 클라이언트와 상호협의간 사용하는 private claim, 만료시간 등과 같이 미리 정해진 registered claim으로 구분된다.
- 시그니처는 jwt가 원본이라는 것을 증명하는 서명이다. 실제 토큰을 발급할 때 개인정보와 secret key 그리고 해시 알고리즘을 가지고 암호화된 값이 만들어진다. 이후에 클라이언트로 부터 전달받은 토큰은 서버가 복호화하여 원본인지 확인하는 작업을 거친다. 


## 📚 느낀점
- 좋아요를 두번 누르면 취소되는 기능을 백엔드에서 구현하지 않는 이유에 대해 생각해보게 되었다. 지연 때문에 좋아요 요청이 두번올 수도 있고, 그럴 경우 데이터 베이스 정합성에 문제가 생길 수 있기 때문에 프론트엔드에서 취소하는 api를 호출하도록하는게 적합하다.
- 보통 REST API는 자원을 명시하는데 follow나 like 동사를 URL자원으로 사용하면 의미가 분명하지 않다. 하지만 동사를 명사화하는게 맞는지 고민해보았고 동사가 사용된 uri의 경우에는 POST메소드 없이 GET만 호출할 수 있도록 설계했다.
- Request body로 받는 정보는 유저 생성처럼 서버의 데이터가 변화하는 경우이고 Query Parameter로 정보를 받는 것은 서버 데이터 변경 없이 필터링, 검색 등 할 때 사용한다.  
